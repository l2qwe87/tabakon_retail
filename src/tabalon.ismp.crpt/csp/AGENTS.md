# Правила разработки для проекта

## Git Workflow

### Ветвление
- Все коммиты должны делаться только в feature ветки
- Названия feature веток должны быть в формате: `feature/название-фичи`
- Запрещены прямые коммиты в main/master ветки
- Перед созданием PR убедитесь, что ваша ветка обновлена относительно основной ветки
- **ВАЖНО**: Убедитесь, что все файлы добавлены в git перед созданием коммита (`git status`, `git add`)

### Коммиты
- Сообщения коммитов должны быть на русском языке
- Формат сообщения коммита: `тип: описание`
  - `feat:` новая функциональность
  - `fix:` исправление бага
  - `docs:` документация
  - `style:` форматирование кода
  - `refactor:` рефакторинг
  - `test:` тесты
  - `chore:` обслуживание
- **ПРОВЕРКА ПЕРЕД КОММИТОМ**:
  - Всегда проверяйте `git status` перед коммитом
  - Убедитесь, что в коммит попадают только нужные файлы
  - Исключайте временные файлы (.tmp, .temp, pr_*.txt, и т.д.)
  - Используйте `.gitignore` для исключения временных файлов

### Pull Request
- Все PR должны создаваться с полным описанием на русском языке
- **ВАЖНО**: Всегда используйте --body-file для создания и редактирования PR, даже для коротких описаний, чтобы соответствовать стандартам проекта
- При создании PR учитывайте особенности операционной системы:
  - **Windows**: 
    - Используйте PowerShell или bash
    - Для длинных описаний создавайте временный файл: `echo "описание" > pr_temp.txt`
    - Используйте флаг --body-file: `gh pr create --body-file pr_temp.txt`
    - После создания PR удаляйте временные файлы: `del pr_temp.txt`
    - **ПРОВЕРКА ПЕРЕД СОЗДАНИЕМ PR**: `git status` и убедитесь, что нет временных файлов
    - **Linux/Mac**: 
    - Используйте bash
    - Для коротких описаний можно использовать heredoc: `gh pr create --body <<'EOF' ... EOF`
    - Для длинных описаний также используйте временные файлы
    - **ПРОВЕРКА ПЕРЕД СОЗДАНИЕМ PR**: `git status` и убедитесь, что нет временных файлов
- Перед созданием PR убедитесь, что все изменения закоммичены
- Проверяйте корректность описания после создания PR
- Шаблон PR:
  ```
  ## Описание
  Краткое описание изменений
  
  ## Тип изменений
  - [ ] Новая функциональность
  - [ ] Исправление бага
  - [ ] Документация
  - [ ] Рефакторинг
  - [ ] Тесты
  
  ## Проверка
  - [ ] Код соответствует стандартам проекта
  - [ ] Добавлены необходимые тесты
  - [ ] Документация обновлена
  ```

## Кодстайл
- Следуйте существующим паттернам кода в проекте
- Используйте осмысленные имена переменных и функций только на английском языке
- Добавляйте комментарии для сложного кода на русском языке

## Управление временными файлами
### Запрещённые файлы в коммитах:
- `pr_*.txt` - временные файлы для PR
- `*.tmp`, `*.temp` - временные файлы
- `temp_*` - временные файлы
- `backup_*` - файлы резервных копий

### Рекомендуемые практики:
- Создавайте временные файлы в корне проекта для лёгкого удаления
- Всегда проверяйте `git status` перед коммитом
- Используйте точечное добавление файлов: `git add конкретный_файл`
- Проверяйте содержимое коммита: `git diff --cached --name-only`

## Диагностика проблем с Git
### Частые проблемы и решения:
1. **"nothing to commit, working tree clean"**
   - Проверьте статус: `git status`
   - Добавьте файлы: `git add .` или `git add имя_файла`
   - Убедитесь, что файлы не в .gitignore

2. **"No commits between main and main"**
   - Убедитесь, что вы в feature ветке: `git branch`
   - Проверьте, что есть изменения: `git log main..HEAD --oneline`
   - Если изменений нет, создайте их сначала

3. **Проблемы с PR на Windows**
   - Используйте временные файлы для длинных описаний
   - Проверьте права доступа к репозиторию
   - Убедитесь, что ветка запушена: `git push origin feature/имя`

4. **ВРЕМЕННЫЕ ФАЙЛЫ В КОММИТАХ**
   - Проверяйте `git status` перед коммитом
   - Удаляйте временные файлы перед `git add .`
   - Используйте `git add имя_файла` вместо `git add .` для точности
   - Проверяйте список файлов в коммите: `git diff --cached --name-only`

## Тестирование
- Все новые функции должны иметь тесты
- Перед созданием PR запустите полный набор тестов
- Убедитесь, что все тесты проходят

## Ревью кода
- Все PR требуют как минимум одного ревью
- Запрещено мёржить PR без явного одобрения/подтверждения от ревьюера
- Адресуйте все комментарии ревьюера перед мержем
- Будьте конструктивны в ревью чужого кода