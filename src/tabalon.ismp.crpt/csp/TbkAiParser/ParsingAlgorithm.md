# Алгоритм парсинга

Парсер на вход принимает строку из символов Base64. В строке мы ищем специальные коды (AI):

- 01 (длина значения: строка 14 символов)
- 21 (длина значения: от 6 до неизвестно)
- 8005 (длина значения: от 6 до неизвестно)
- 91 (длина значения: от 4 до неизвестно)
- 92 (длина значения: от 4 до неизвестно)
- 93 (длина значения: ровно 4 символа, всегда самый последний)

Результатом является массив пар (AI, Value), где Value - это символы между двумя AI.

## Алгоритм

1. Проверяем, начинается ли строка с "01" и содержит ли "21" на позициях 16-17 (0-based).
   - Если нет, возвращаем список с одним элементом ("unknown", первые 21 символов строки).
2. Если да, начинаем разбор:
   - Первые 2 символа - AI "01", далее 14 символов - значение для "01".
   - Далее обязательно AI "21".
3. Обобщенный алгоритм:
   - Берем последний найденный AI (для начала это "21").
   - Начиная с позиции после предыдущего найденного AI, ищем следующий AI из списка: 8005, 91, 92, 93.
   - Для AI "93" специальная проверка: он считается только если его значение ровно 4 символа и это конец строки.
   - Если нашли один из них, пытаемся сразу определить значение найденного AI. Оно должно удовлетворять условию минимальной длины до следующего AI.
   - Если длина не удовлетворяет, значит найденный предыдущий AI не является AI, а является частью значения предыдущего AI. Продолжаем поиск дальше.